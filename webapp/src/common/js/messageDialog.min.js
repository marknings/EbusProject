/* <%=grunt.template.tody("yyyy-MM-dd")>  */
angular.module("BPM.messageDialog",["szseui"]).config(["$provide",function(a){a.decorator("$modal",["$delegate","$timeout","$window","$q",function(a,b,c,d){function e(){}function f(){}function g(a){function b(a){k[d-1].bottom=k[d-1].bottom-(a.screenY-g),k[d-1].right=k[d-1].right-(a.screenX-f),k[d-1].top=k[d-1].top+(a.screenY-g),k[d-1].left=k[d-1].left+(a.screenX-f),angular.element(".modal-dialog").eq(d-1).css({height:angular.element(".modal-dialog").eq(d-1).innerHeight()+"px",left:k[d-1].left+"px",top:k[d-1].top+"px",right:k[d-1].right+"px",bottom:k[d-1].bottom+"px",margin:"auto",position:"absolute"}),f=a.screenX,g=a.screenY}var d=a,e=!1,f=0,g=0;k[d-1]={},k[d-1].top=(c.innerHeight-angular.element(".modal-dialog").eq(d-1).innerHeight())/2,k[d-1].left=(c.innerWidth-angular.element(".modal-dialog").eq(d-1).innerWidth())/2,k[d-1].right=k[d-1].left,k[d-1].bottom=k[d-1].top,angular.element(".modal-header").eq(d-1).bind("mousedown",function(a){e=!0,f=a.screenX,g=a.screenY,a.preventDefault(),a.stopPropagation()}),angular.element(".modal").eq(d-1).bind("mouseup",function(a){e&&(e=!1,b(a)),a.preventDefault(),a.stopPropagation()}),angular.element(".modal").eq(d-1).bind("mousemove",function(a){e&&b(a),a.preventDefault(),a.stopPropagation()})}function h(a){var c=a;angular.element(".modal-dialog").eq(c-1).length>0?(angular.element(".modal-dialog").eq(c-1).css({height:angular.element(".modal-dialog").eq(c-1).innerHeight()+"px",bottom:0,left:0,margin:"auto",position:"absolute",right:0,top:0}),window.JPlaceHolder&&window.JPlaceHolder.init()):b(function(){h(c)},200)}function i(a){var c=a;angular.element(".modal-dialog").eq(c-1).length>0?g(c):b(function(){i(c)},250)}var j=0,k=[],l=function(b){var c=angular.extend({},{keyboard:!1},b);e();var d=a.open(c);return j++,h(j),i(j),d.result.then(function(){j>0&&(j-=1,"absolute"!==angular.element(".modal-dialog").eq(j-1).css("position")&&h(j)),0==j&&f()},function(){j>0&&(j-=1,"absolute"!==angular.element(".modal-dialog").eq(j-1).css("position")&&h(j)),0==j&&f()}),d},m=function(a){var b=window.$getFrameUiTemplateUrl$(a||{},a||{},"modal","confirmation"),c=l({templateUrl:b,dialogClass:a.dialogClass||"modal-md",controller:["$scope","$modalInstance",function(b,c){b.title=a.title||"业务确认",b.message=a.message,b.mIsArray=angular.isArray(a.message),b.moduleName=a.moduleName||"业务确认",b.okName=a.okName||"确定",b.cancelName=a.cancelName||"取消",b.dialogClass="modal-md",b.close=function(){c.close(),a.isClosePage&&window.CloseWebPage()},b.cancel=function(){c.dismiss()}}]});return c.result.then(function(){a.ok&&a.ok()},function(){a.cancel&&a.cancel()}),c},n=function(a){var b=window.$getFrameUiTemplateUrl$(a||{},a||{},"modal","confirWithCheck"),c=l({templateUrl:b,dialogClass:a.dialogClass||"modal-md",controller:["$scope","$modalInstance",function(b,c){b.title=a.title||"业务确认",b.message=a.message,b.mIsArray=angular.isArray(a.message),b.check=a.check,b.checkIsArray=angular.isArray(a.check),b.moduleName=a.moduleName||"业务确认",b.okName=a.okName||"确定",b.cancelName=a.cancelName||"取消",b.dialogClass="modal-md",b.close=function(){c.close()},b.cancel=function(){c.dismiss()}}]});return c.result.then(function(){a.ok&&a.ok()},function(){a.cancel&&a.cancel()}),c},o=function(a){var b=window.$getFrameUiTemplateUrl$(a||{},a||{},"modal","message"),c=l({dialogClass:a.dialogClass||"modal-md",templateUrl:b,controller:["$scope","$modalInstance",function(b,c){b.title=a.title||"业务提示",b.message=a.message,b.mIsArray=angular.isArray(a.message),b.moduleName=a.moduleName||"业务提示",b.okName=a.okName||"关闭",b.close=function(){a.close&&a.close(),c.close()}}]});return c},p=function(a){var b=window.$getFrameUiTemplateUrl$(a||{},a||{},"modal","wrong"),c=l({templateUrl:b,dialogClass:a.dialogClass||"modal-md",controller:["$scope","$modalInstance",function(b,c){b.title=a.title||"错误提示",b.message=a.message,b.mIsArray=angular.isArray(a.message),b.moduleName=a.moduleName||"错误提示",b.okName=a.okName||"关闭",b.close=function(){a.close&&a.close(),c.close()}}]});return c},q=function(a){var b=window.$getFrameUiTemplateUrl$(a||{},a||{},"modal","exception"),c=l({templateUrl:b,dialogClass:a.dialogClass||"modal-md",controller:["$scope","$modalInstance",function(b,c){b.title=a.title||"异常提示",b.message=a.message,b.mIsArray=angular.isArray(a.message),b.moduleName=a.moduleName||"异常提示",b.okName=a.okName||"关闭",b.close=function(){a.close&&a.close(),c.close()}}]});return c},r=function(a){function b(a){return void 0==a||0==a?"":"("+a/1e3+")"}var c=window.$getFrameUiTemplateUrl$(a||{},a||{},"modal","success"),d=l({templateUrl:c,dialogClass:a.dialogClass||"modal-md",controller:["$scope","$modalInstance","$timeout",function(c,d,e){function f(){g-=1e3,0>g||(c.countdown=b(g),e(f,1e3))}c.title=a.title,c.message=a.message,c.mIsArray=angular.isArray(a.message),c.moduleName=a.moduleName||"成功提示",c.okName=a.okName||"关闭",c.isClosePage=a.isClosePage,c.stayName=a.stayName||"留在本页",c.close=function(){a.close&&a.close(),d.close(),a.isClosePage&&window.CloseWebPage()};var g=a.delay||3e3;c.countdown=b(g),e(f,1e3);var h=e(function(){a.close&&a.close(),d.close(),a.isClosePage&&window.CloseWebPage()},g);c.stay=function(){e.cancel(h),a.stay&&a.stay(),d.close()}}]});return d},s=function(a){var c=window.$getFrameUiTemplateUrl$(a||{},a||{},"modal","isuccess"),d=l({templateUrl:c,dialogClass:a.dialogClass||"modal-xs",controller:["$scope","$modalInstance",function(b,c){b.title=a.title,b.close=function(){a.close&&a.close(),c.close()}}]});return b(function(){a.close&&a.close(),d.close()},a.delay||3e3),d},t=function(a){var b=window.$getFrameUiTemplateUrl$(a||{},a||{},"modal","loading"),c=l({templateUrl:b,dialogClass:"loading-wrap",controller:["$scope","$modalInstance",function(b,c){b.message=a.message||"处理中..."}]});return c};return{open:l,confirmation:m,confirWithCheck:n,message:o,wrong:p,exception:q,success:r,isuccess:s,loading:t}}])}]);