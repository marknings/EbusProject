# EbusProject
ebus project for dayawang
一、用户端首页及功能描述：
  

首页将购票、车辆位置及座位查询、月票上车投票、检票、线路查询、申请新线路等功能均在首页呈现，而且，两个常用功能可以在首页一键完成，简单方便，并突出放在中间位置，面积大，便于手指快捷、方便的操作。
其他不常用功能则在新打开的页面完成。
实现方式：
1、车辆位置及座位查询
  

当用户点击“车辆位置及座位查询”时，弹窗选择车次（同一条线往返1趟，为2个车次，奇数车次为大亚湾始发，偶数车次为深圳始发；往返2趟的为4个车次；第二班发车的车次分别为3、4车次；后期新增线路后，弹窗要同时选择线路）按钮下方展开一块位置显示车辆位置示意图和当前车辆座位情况。
车辆位置以示意图方式呈现，用户可以评估与自己的距离和时间，后期我们可以把这一块功能再优化，包括预估到用户所在地（或指定站点所需时间），还有几个站等。
按钮右边的是收起展开内容的按钮，点击收起按钮后，查询信息不再显示；重新查询须再点击车辆位置及座位查询按钮；

2、投票及验票：
用户当月有月票的，显示“月票上车投票”，用户当月没有月票，但已购买单程票的，显示“上车投票”；用户既无月票，也没有购买单程票的，或者未登录账户的显示“请先购票”，按钮不可点击；
用户未登录的，显示“请登录”，点击该按钮，下方展开调用“登录注册”功能；
车辆到达用户候车站点时，用户点击“月票上车投票”按钮后，为避免误操作，会弹窗显示：“投票确认：是  否”；如果该线路有2班及以上班次的，则弹窗让用户选择班次，并确认，确认后直接显示该班次车的位置及座位信息；
如果投票成功，则该按钮的文字内容显示为：“已投票”（下方用小字显示：请主动将此页面给司机核验），且按钮功能失效；同时，下方的“当次车验票信息”显示为：当次车的线路号+车牌号码；如果有代他人购票的，则显示为：线路号+车牌号码+代购票张数；
用户上车后，以上操作均已完成。用户将该主页屏幕主动给司机核验。
用户投票操作后2小时内，投票按钮失效，2小时后，恢复到可投票状态。

二、购月票页面
用户从主页点击进入购票页面；或从微信公众号下方菜单点击直接进入购票页面。
  

用户在首页点击30天月票和20天月票均进入该页面；
同时，用户可以在该页面切换2种月票。切换后，下方不同类型的月票说明（适用人群和使用规则）相应会自动变化，以供用户参考选择；
用户一次选择线路，选择当月或次月票；选择后自动调取系统设定的相应的价格；
如果用户已购买过月票的，则默认显示上次所购买月票的线路号，这样用户就不用每次都作选择操作；
如果系统只有1条线路，则自动默认1号线，用户也无须进行选择操作；
选择当月或次月票对话框，默认规则为：用户当月已购月票的，则对话框自动默认显示购次月月票；当月未购月票则默认显示购买当月月票；如果用户当月已购月票，但通过点下拉菜单方式选择了购当月月票，则弹窗提示：“您已购当月月票，剩余**次未使用，确认要购买当月月票吗？  确认    取消”；如果已购买次月月票，仍选择购买次月月票，则提示：你已购次月月票，暂不能重复购买。确认。点击确认后，页面自动跳转到首页。
选择完毕后，用户点击下方“付款”按钮，按钮文字中自动调用本次应付款金额。
当用户提交付款时，未登录或未注册的，进入登录注册后完成支付。

三、购单程票页面：
  

用户从主页点击购单程票按钮进入购票页面；或从微信公众号下方菜单点击购单程票选项直接进入购票页面。
用户可直接在页面阅读单程票使用规则说明内容。
老年人或用户的家人不方便购买的，用户可以需要代购票的乘客带上车，在车上帮忙代购，购买后，出示首页给司机查验即可。司机发现有需要乘车，但不知怎么买票的，可以要车上已购票用户帮其代购并出示给司机首页验票；
非月票用户一次购买多张单程票的，应提前购票，并在上车时，在首页一次投票完毕；代其他乘客购票的，则在支付后自动完成投票，首页投票信息中显示新增人数及时间；
  

当用户提交付款时，未登录或未注册的，进入登录注册后完成支付。支付完成页面自动跳转到首页。

四、申请新线路页面
  

用户从主页点击购申请新线路按钮进入申请页面；或从微信公众号下方菜单点击申请新线路选项直接进入申请页面。
用户须输入详细居住地址和工作地址，并在地图标注（此功能后期开发）；地图以展开方式调用；
用户输入后，点击提交申请按钮，判断用户是否登录，未登录的则进入登录注册页面，登录或注册完成，则显示已提交，用户确认后自动跳转到首页。






